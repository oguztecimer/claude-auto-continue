---
phase: 08-publish
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: [.planning/]
autonomous: false
requirements: [PUBL-02, PUBL-03]

must_haves:
  truths:
    - "npm view claude-auto-continue returns version 1.0.0 with correct metadata"
    - "npm install -g claude-auto-continue succeeds in a clean Node environment"
    - "claude-auto-continue --help prints usage text after global install from registry"
    - "Full auto-continue cycle works: rate limit detected, countdown shown, auto-resume triggered"
  artifacts:
    - path: "https://www.npmjs.com/package/claude-auto-continue"
      provides: "Live npm registry page with README, metadata, version 1.0.0"
  key_links:
    - from: "npm registry"
      to: "GitHub repository"
      via: "repository field in package.json"
      pattern: "github.com/dakmor/claude-auto-continue"
    - from: "npm install -g"
      to: "bin/claude-auto-continue.js"
      via: "bin field in package.json"
      pattern: "claude-auto-continue|clac"
---

<objective>
Publish `claude-auto-continue@1.0.0` to the npm registry and verify it installs and works correctly for any Node.js >=18 user.

Purpose: Make the tool publicly available so developers can install it with a single `npm install -g` command.
Output: Live npm package at https://www.npmjs.com/package/claude-auto-continue, verified via smoke test.
</objective>

<execution_context>
@/Users/dakmor/.claude/get-shit-done/workflows/execute-plan.md
@/Users/dakmor/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/07-pre-publish-verification/07-01-SUMMARY.md
@.planning/phases/08-publish/08-RESEARCH.md
</context>

<tasks>

<task type="checkpoint:human-action" gate="blocking">
  <name>Task 1: Create npm account, verify name availability, and publish</name>
  <action>
The user must complete the following steps in order. Present this as a numbered checklist.

**Step 1 — Check package name availability:**
```bash
npm view claude-auto-continue
```
Expected: `npm ERR! code E404` (name is free). If it returns package data, the name is taken — STOP and discuss an alternative name (fallback: `claude-autocontinue` or `auto-continue-claude`).

**Step 2 — Create an npm account:**
1. Go to https://www.npmjs.com/signup
2. Fill in username, email, password
3. **Immediately** check email inbox (including spam) for verification email
4. Click the verification link — this is required before first publish
5. Verify account is active: go to https://www.npmjs.com/~{username} and confirm the profile page loads

**Step 3 — Authenticate the local terminal:**
```bash
npm login
```
This opens a browser for web-based login (npm 9+). After completing login in the browser, the CLI receives a session token that lasts 2 hours. Do NOT delay between login and publish.

**Step 4 — Verify authentication:**
```bash
npm whoami
```
Expected: prints your npm username. If it returns an error, re-run `npm login`.

**Step 5 — Publish:**
```bash
npm publish
```
No flags needed (unscoped public package). The `prepublishOnly` hook runs `npm run build` (TypeScript compile) automatically.

Expected output includes:
```
npm notice Publishing to https://registry.npmjs.org/
+ claude-auto-continue@1.0.0
```

**Step 6 — Wait for registry propagation (2-5 minutes), then verify:**
```bash
npm view claude-auto-continue version
```
Expected: `1.0.0`

```bash
npm view claude-auto-continue
```
Expected: Full package metadata showing author `dakmor`, correct description, repository URL, keywords.

**Troubleshooting:**
- `npm ERR! code E401` / `need auth` → session expired, re-run `npm login`
- `npm ERR! publish Failed PUT 403` with email message → email not verified, check inbox
- `npm ERR! 403 Forbidden` package name → name taken, need alternative
- `npm ERR! code ELIFECYCLE` during publish → `prepublishOnly` build failed, run `npm run build` separately to see the TypeScript error
  </action>
  <verify>
Run: `npm view claude-auto-continue version` — must return `1.0.0`
Run: `npm view claude-auto-continue` — must show correct author, description, repository
  </verify>
  <done>
`claude-auto-continue@1.0.0` is live on the npm registry with correct metadata (author: dakmor, repository: github.com/dakmor/claude-auto-continue, version: 1.0.0).
  </done>
</task>

<task type="checkpoint:human-action" gate="blocking">
  <name>Task 2: Smoke test — install and verify full auto-continue cycle</name>
  <action>
The user must complete a full functional smoke test in a clean environment. Present as a numbered checklist.

**Step 1 — Set up clean Node environment (using nvm):**
```bash
nvm install 20
nvm use 20
```
If nvm is not installed, use any Node.js >=18 environment, but ensure global node_modules are clean (no prior `claude-auto-continue` install).

**Step 2 — Verify build tools are present (required for node-pty native addon):**
```bash
# macOS:
xcode-select -p
# Should return a path like /Library/Developer/CommandLineTools

# Linux:
which make && which g++
# Both should return paths
```
If build tools are missing: macOS: `xcode-select --install`, Linux: `sudo apt-get install build-essential`.

**Step 3 — Install from registry:**
```bash
npm install -g claude-auto-continue
```
Expected: installs successfully, node-pty compiles without errors.

**Troubleshooting node-pty build failure:**
- `gyp ERR! build error` → missing build tools (see Step 2)
- `EACCES permission denied` → using Homebrew Node without nvm. Switch to nvm or use `sudo npm install -g`

**Step 4 — Verify binaries are on PATH:**
```bash
which claude-auto-continue
which clac
```
Both should return paths.

**Step 5 — Basic sanity check:**
```bash
claude-auto-continue --help
claude-auto-continue --version
```
Expected: help text prints, version shows `1.0.0`.

**Step 6 — Full functional test:**
```bash
clac
```
This launches Claude Code wrapped in the auto-continue tool. Use Claude Code normally until a usage rate limit is hit. Observe:
1. Rate limit detection message appears
2. Countdown card displays with timer counting down to reset time
3. When timer reaches zero, `continue` command is automatically sent
4. Claude Code resumes the conversation

This is the complete auto-continue cycle. All four steps must be observed.

**Step 7 — Verify npm page renders correctly:**
Visit https://www.npmjs.com/package/claude-auto-continue in a browser. Confirm:
- README renders with description, install instructions, how-it-works section
- Badges (npm version, node version, license) show live data (not error/N/A)
- Sidebar shows correct repository link, author, version, license
  </action>
  <verify>
All four cycle steps observed: rate limit detected → countdown shown → timer expires → auto-resume triggered.
`claude-auto-continue --help` prints usage text after global install from npm registry.
npm page renders README correctly with live badges.
  </verify>
  <done>
Smoke test confirms: (1) global install from npm registry works, (2) CLI binary runs correctly, (3) full auto-continue cycle completes end-to-end, (4) npm page renders properly.
  </done>
</task>

<task type="auto">
  <name>Task 3: Post-publish cleanup and GitHub release</name>
  <files>.planning/</files>
  <action>
After the user confirms both Tasks 1 and 2 passed:

1. Create a git tag and GitHub release for v1.0.0:
```bash
git tag -a v1.0.0 -m "Release v1.0.0"
git push origin v1.0.0
gh release create v1.0.0 --title "v1.0.0" --notes "Initial public release. Install: npm install -g claude-auto-continue"
```

2. Remove planning artifacts from the working tree (per user decision):
```bash
rm -rf .planning/
git add -A
git commit -m "chore: remove planning artifacts post-publish"
git push
```

Note: This removes .planning/ from the working tree and future commits. The planning history remains in git history (accessible via `git log` or browsing earlier commits).
  </action>
  <verify>
    <automated>git tag -l v1.0.0 | grep -q v1.0.0 && echo "PASS: tag exists" || echo "FAIL: no tag"</automated>
    <automated>test ! -d .planning && echo "PASS: .planning removed" || echo "FAIL: .planning still exists"</automated>
  </verify>
  <done>
GitHub release v1.0.0 created. Planning artifacts removed from working tree. Project is published and clean.
  </done>
</task>

</tasks>

<verification>
1. `npm view claude-auto-continue version` returns `1.0.0`
2. `npm install -g claude-auto-continue && claude-auto-continue --help` succeeds in clean environment
3. Full auto-continue cycle verified: rate limit → countdown → auto-resume
4. https://www.npmjs.com/package/claude-auto-continue renders correctly
5. GitHub release v1.0.0 exists
6. `.planning/` directory removed from working tree
</verification>

<success_criteria>
- `claude-auto-continue@1.0.0` is live on the npm registry
- Any Node.js >=18 user can install and use the tool via `npm install -g claude-auto-continue`
- The full auto-continue cycle has been verified end-to-end via smoke test
- GitHub release tag v1.0.0 marks the published version
</success_criteria>

<output>
After completion, create `.planning/phases/08-publish/08-01-SUMMARY.md`
</output>
